# Docker Commands Reference

## Production Deployment

### Prerequisites for ECR Login
1. AWS CLI installed
2. AWS credentials configured (`aws configure` or environment variables)
3. IAM permissions for ECR access

```bash
# Login to ECR (uses your AWS CLI credentials)
aws ecr get-login-password --region us-east-1 | docker login --username AWS --password-stdin 237958597903.dkr.ecr.us-east-1.amazonaws.com

# Note: 
# - Username is always "AWS" for ECR
# - Password is automatically generated by get-login-password
# - Repository URL includes your AWS account ID

# Build production image (uses .env.prod by default)
docker build -t cloudonauts:latest .

# Tag the image for ECR
docker tag cloudonauts:latest 237958597903.dkr.ecr.us-east-1.amazonaws.com/cloudonauts:latest

# Push to ECR
docker push 237958597903.dkr.ecr.us-east-1.amazonaws.com/cloudonauts:latest
```

## Useful Docker Commands

```bash
# View running containers
docker ps

# Stop a container
docker stop [container_id]

# View logs
docker logs [container_id]

# Interactive shell in container
docker exec -it [container_id] /bin/bash

# Remove unused images
docker image prune

# Remove all stopped containers
docker container prune
```

## Environment File
- `.env.prod` - Used for production deployment

Example with specific tag:
```bash
# Build with timestamp tag
$timestamp = Get-Date -Format "yyyyMMddHHmmss"
docker build --build-arg ENV=prod -t cloudonauts:$timestamp .
```
